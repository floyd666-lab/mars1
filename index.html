<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Марсель & Рухсора приглашают вас на свадьбу</title>
<meta name="robots" content="noindex, nofollow">

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Cormorant+Garamond:wght@400;600&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
:root {
  --wine:#7A1F2B;
  --wine-light:#9a3a46;
}

body {
  margin: 0;
  font-family: 'Montserrat', sans-serif;
  background: linear-gradient(180deg, #6f0f1c 0%, #8a1c2c 40%, #6f0f1c 100%);
  color: #222;
  min-height: 100vh;
}


.container {
  max-width: 420px;
  margin: auto;
  padding-bottom: 60px;
}
.section {
  padding: 60px 24px;
  text-align: center;

  background: #f8f2ef;          /* светлый фон блока */
  margin: 30px 16px;
  border-radius: 24px;

  box-shadow: 0 12px 40px rgba(0,0,0,0.25);
}
.title {
  font-family: 'Cormorant Garamond', serif;
  font-size: 30px;
  color: #7A1F2B;
  margin-bottom: 25px;
  letter-spacing: 1px;
  font-weight: 600;
}

.hero {
  height:100vh;
  background:url("photos/main.jpg") center/cover no-repeat;
  background-attachment: fixed;
  position:relative;
  display:flex;
  justify-content:center;
  align-items:center;
}
.hero::before{content:"";position:absolute;inset:0;background:rgba(0,0,0,0.4);}
.hero-content{position:relative;color:white;text-align:center;}
.hero h1{font-family:'Playfair Display';font-size:42px;}
.phrase{font-family:'Cormorant Garamond';font-size:22px;font-style:italic;margin:15px 0;}

.gallery {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:14px;
  margin-top:30px;
}
.gallery img {
  width: 100%;
  height: 240px;
  border-radius: 18px;
  object-fit: cover;
  opacity: 0;
  transform: scale(0.95) translateY(30px);
  transition: 0.8s ease;
}

.section.visible .gallery img {
  opacity: 1;
  transform: scale(1) translateY(0);
}

.section.visible .gallery img:nth-child(1) { transition-delay: 0.1s; }
.section.visible .gallery img:nth-child(2) { transition-delay: 0.3s; }
.section.visible .gallery img:nth-child(3) { transition-delay: 0.5s; }
.section.visible .gallery img:nth-child(4) { transition-delay: 0.7s; }


.couple {
  display: flex;
  justify-content: center;
  gap: 28px;
  margin-top: 30px;
  flex-wrap: wrap;
}

.couple img{width:140px;height:140px;border-radius:50%;object-fit:cover;}

.colors{display:flex;justify-content:center;gap:15px;}
.color{width:40px;height:40px;border-radius:50%;}

input,select,textarea{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:10px;
  border:1px solid #ccc;
}

.button{
  margin-top:20px;
  background:linear-gradient(135deg,var(--wine),var(--wine-light));
  color:white;
  border:none;
  padding:14px 26px;
  border-radius:30px;
  font-size:16px;
  cursor:pointer;
  transition:0.3s;
}

.button.loading::after {
  content:"...";
  position:absolute;
  right:18px;
  animation:blink 1.4s infinite;
}

@keyframes blink {
  0%{opacity:0;}50%{opacity:1;}100%{opacity:0;}
}

.button.success {background:#4CAF50 !important;}

.map-box {
  margin-top:20px;
  border-radius:20px;
  overflow:hidden;
  box-shadow:0 10px 30px rgba(0,0,0,0.15);
}
.map-box iframe {width:100%;height:280px;border:none;}

.music-btn {
  position:fixed;
  bottom:20px;
  right:20px;
  background:rgba(122,31,43,0.9);
  color:white;
  padding:12px 18px;
  border-radius:30px;
  font-size:14px;
  cursor:pointer;
  z-index:100;
}

.lang-switch {
  position:fixed;
  top:20px;
  right:20px;
  z-index:9999;
  display:flex;
  gap:10px;
  background:rgba(0,0,0,0.4);
  padding:6px 12px;
  border-radius:20px;
}

.lang-switch span {
  cursor:pointer;
  color:white;
  opacity:0.6;
  transition:0.3s;
}

.lang-switch span.active {
  opacity:1;
  font-weight:600;
}
  /* ===== THANK YOU EFFECT ===== */
.thank-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 99999;
  opacity: 0;
  pointer-events: none;
  transition: 0.6s ease;
}

.thank-overlay.show {
  opacity: 1;
  pointer-events: auto;
}

.thank-box {
  background: white;
  padding: 40px 30px;
  border-radius: 24px;
  font-family: 'Playfair Display', serif;
  font-size: 26px;
  color: #7A1F2B;
  text-align: center;
  max-width: 300px;
  animation: pop 0.8s ease;
  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
}

@keyframes pop {
  0% { transform: scale(0.5); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

#confettiCanvas {
  position: fixed;
  inset: 0;
  pointer-events: none;
}
/* ===== COUPLE PREMIUM BLOCK ===== */
.couple {
  display: flex;
  justify-content: center;
  gap: 40px;
  margin-top: 40px;
}

.person {
  text-align: center;
  opacity: 0;
  transform: translateY(40px);
  transition: 0.8s ease;
  max-width: 160px;
}

.section.visible .person {
  opacity: 1;
  transform: translateY(0);
}

.section.visible .person:nth-child(1) {
  transition-delay: 0.1s;
}

.section.visible .person:nth-child(2) {
  transition-delay: 0.4s;
}


/* Появление при скролле */
.section.visible .person {
  opacity: 1;
  transform: translateY(0);
}

/* Задержка: сначала жених, потом невеста */
.section.visible .person:nth-child(1) {
  transition-delay: 0.1s;
}

.section.visible .person:nth-child(2) {
  transition-delay: 0.4s;
}


.section.visible .person {
  opacity: 1;
  transform: translateY(0);
}
/* ===== ROUND COUPLE FRAMES PREMIUM ===== */
.frame {
  width: 160px;
  height: 160px;
  padding: 4px;
  border-radius: 50%;
  background: linear-gradient(135deg, #E3C3A8, #7A1F2B, #E3C3A8);
  box-shadow: 0 12px 35px rgba(0,0,0,0.35);
  margin: auto;
  overflow: hidden;
  transition: 0.5s ease;
}

.frame img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
  transition: 0.5s ease;
}

/* Hover эффект */
.frame:hover img {
  transform: scale(1.08);
}

.frame:hover {
  box-shadow: 0 18px 50px rgba(0,0,0,0.45);
  transform: translateY(-6px);
}


.frame::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 26px;
  background: linear-gradient(135deg, #FFD6A5, #7A1F2B, #E3C3A8);
  opacity: 0.6;
  z-index: -1;
}


/* Hover эффект */
.frame:hover img {
  transform: scale(1.08);
}

.frame:hover {
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
  transform: translateY(-6px);
}

/* Имена */
.name {
  margin-top: 16px;
  font-family: 'Playfair Display', serif;
  font-size: 22px;
  color: #7A1F2B;
  letter-spacing: 1px;
}

/* Роль */
.role {
  margin-top: 6px;
  font-family: 'Cormorant Garamond', serif;
  font-size: 18px;
  font-style: italic;
  color: #555;
}
/* ===== CLOSE BUTTON ===== */
.close-btn {
  margin: 25px auto 0 auto;   /* ← центрируем по горизонтали */
  display: block;            /* ← обязательно, чтобы margin auto работал */
  padding: 12px 30px;
  border-radius: 30px;
  border: none;
  background: linear-gradient(135deg, #7A1F2B, #E3C3A8);
  color: white;
  font-size: 15px;
  cursor: pointer;
  opacity: 0;
  transform: translateY(20px);
  transition: 0.6s ease;
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
}

.thank-overlay.show .close-btn {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 1s; /* появляется через 1 секунду */
}

.close-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 10px 30px rgba(0,0,0,0.35);
}
/* ===== SECTION BASE ANIMATION (ОБЯЗАТЕЛЬНО) ===== */
.section {
  opacity: 0;
  transform: translateY(40px);
  transition: 0.9s ease;
}

.section.visible {
  opacity: 1;
  transform: translateY(0);
}
.hero {
  border-radius: 0;
  margin: 0;
}
/* ===== PREMIUM DIVIDER NO BACKGROUND ===== */
.divider {
  width: 140px;
  height: 1px;
  margin: 45px auto;
  background: linear-gradient(90deg, transparent, #E3C3A8, transparent);
  position: relative;
}

.divider::before {
  content: "❦";
  position: absolute;
  top: -14px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 26px;
  color: #E3C3A8;
  background: transparent;
}

/* ===== HERO NAMES BEAUTIFUL ALIGN ===== */
.hero-names {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 18px;
  flex-wrap: wrap;
  font-family: 'Playfair Display', serif;
  font-size: 42px;
  color: white;
  text-align: center;
}

.hero-names .amp {
  font-family: 'Cormorant Garamond', serif;
  font-size: 48px;
  font-style: italic;
  opacity: 0.8;
  margin-top: 4px;
}

/* адаптация для телефонов */
@media (max-width: 480px) {
  .hero-names {
    font-size: 34px;
  }

  .hero-names .amp {
    font-size: 38px;
  }
}
/* ===== MOBILE COUPLE FIX ===== */
@media (max-width: 480px) {
  .frame {
    width: 130px;
    height: 130px;
  }

  .couple {
    gap: 22px;
  }

  .name {
    font-size: 20px;
  }

  .role {
    font-size: 16px;
  }
}

</style>
</head>

<body>

<!-- Language Switch -->
<div class="lang-switch">
  <span onclick="setLang('ru')" id="lang-ru">RU</span>
  <span onclick="setLang('uz')" id="lang-uz">UZ</span>
  <span onclick="setLang('en')" id="lang-en">EN</span>
</div>

<!-- Music -->
<div class="music-btn" onclick="toggleMusic()" id="musicBtn">Включить музыку</div>
<audio id="bgMusic" loop>
  <source src="music/song.mp3" type="audio/mpeg">
</audio>

<div class="container">

<!-- HERO -->
<div class="hero">
  <div class="hero-content">
    <div class="hero-names">
  <span class="name-left">Марсель</span>
  <span class="amp">&</span>
  <span class="name-right">Рухсора</span>
</div>
    <div class="phrase" id="phrase"></div>
    <div id="heroDate">11 апреля 2026</div>
  </div>
</div>

<!-- STORY -->
<div class="section visible">
  <div class="title" id="storyTitle"></div>

  <div class="gallery">
    <img src="photos/photo1.jpg">
    <img src="photos/photo2.jpg">
    <img src="photos/photo3.jpg">
    <img src="photos/photo4.jpg">
  </div>
</div>
  <div class="divider"></div>

  <!-- COUPLE PREMIUM -->
<div class="section couple-section">
  <div class="title">Жених и Невеста</div>

  <div class="couple">
    <div class="person">
      <div class="frame">
        <img src="photos/groom.jpg" alt="Жених">
      </div>
      <div class="name">Марсель</div>
      <div class="role">Жених</div>
    </div>

    <div class="person">
      <div class="frame">
        <img src="photos/bride.jpg" alt="Невеста">
      </div>
      <div class="name">Рухсора</div>
      <div class="role">Невеста</div>
    </div>
  </div>
</div>
  <div class="divider"></div>
<!-- GIFTS -->
<div class="section">
  <div class="title" id="giftsTitle"></div>
  <p id="giftsText"></p>
</div>
<div class="divider"></div>
<!-- DRESS CODE -->
<div class="section">
  <div class="title" id="dressTitle"></div>
  <p id="dressText"></p>
  <div class="colors">
    <div class="color" style="background:#7A1F2B"></div>
    <div class="color" style="background:#E3C3A8"></div>
    <div class="color" style="background:black"></div>
    <div class="color" style="background:red"></div>
  </div>
</div>
<div class="divider"></div>
<!-- SCHEDULE -->
<div class="section">
  <div class="title" id="scheduleTitle"></div>
  <p id="schedule1"></p>
  <p id="schedule2"></p>
</div>
<div class="divider"></div>
<!-- MAP -->
<div class="section">
  <div class="title" id="mapTitle"></div>
  <p id="mapPlace"></p>
  <div class="map-box">
    <iframe src="https://www.google.com/maps?q=Diamond+Hall+Tashkent&output=embed"></iframe>
  </div>
</div>
<div class="divider"></div>
<!-- FORM -->
<div class="section">
  <div class="title" id="confirmTitle"></div>

  <input id="name" placeholder="">
  <select id="status"></select>

  <h4 id="foodTitle"></h4>
  <select id="food"></select>

  <h4 id="alcoholTitle"></h4>
  <select id="alcohol"></select>

  <h4 id="childTitle"></h4>
  <select id="child"></select>

  <h4 id="musicTitle"></h4>
  <textarea id="music"></textarea>

  <button class="button" id="sendBtn" onclick="sendForm()"></button>
</div>

</div>

<script>
const texts = {
  ru: {
    phrase:"Разделите с нами самый счастливый день!",
    storyTitle:"Наша история",
    giftsTitle:"Пожелания по подаркам",
    giftsText:"Самый ценный подарок для нас — ваше присутствие Просим воздержаться от живых цветов.",
    dressTitle:"Dress Code",
    dressText:"Будем благодарны, если вы придержитесь этой палитры:",
    scheduleTitle:"Расписание",
    schedule1:"19:00 — Регистрация",
    schedule2:"20:30 — Банкет",
    mapTitle:"Как нас найти",
    mapPlace:"Ташкент, Diamond Hall",
    confirmTitle:"Подтвердите присутствие",
    foodTitle:"Предпочтения по еде",
    alcoholTitle:"Алкоголь",
    childTitle:"Будет ли с вами ребёнок?",
    musicTitle:"Какую музыку вы хотели бы услышать?",
    name:"Ваше имя",
    send:"Отправить",
    status:["Я приду","К сожалению, не смогу"],
    food:["Без ограничений","Не ем мясо","Не ем рыбу","Вегетарианец"],
    alcohol:["Красное вино","Белое вино","Шампанское","Виски / Коньяк","Водка","Не пью алкоголь"],
    child:["Нет","Да"]
  },
  uz: {
    phrase:"Hayotimizdagi eng baxtli kunni biz bilan birga o‘tkazing!",
    storyTitle:"Bizning hikoyamiz",
    giftsTitle:"Sovg‘alar haqida",
    giftsText:"Biz uchun eng qimmat sovg‘a — sizning ishtirokingiz  Iltimos, tirik gullarsiz.",
    dressTitle:"Dress Code",
    dressText:"Ushbu ranglarga amal qilsangiz xursand bo‘lamiz:",
    scheduleTitle:"Dastur",
    schedule1:"19:00 — Ro‘yxatdan o‘tish",
    schedule2:"20:30 — Banket",
    mapTitle:"Qanday topish mumkin",
    mapPlace:"Toshkent, Diamond Hall",
    confirmTitle:"Ishtirokingizni tasdiqlang",
    foodTitle:"Ovqat bo‘yicha",
    alcoholTitle:"Ichimliklar",
    childTitle:"Bola bilan kelasizmi?",
    musicTitle:"Qaysi musiqani eshitishni xohlaysiz?",
    name:"Ismingiz",
    send:"Yuborish",
    status:["Kelaman","Kela olmayman"],
    food:["Cheklov yo‘q","Go‘sht yemayman","Baliq yemayman","Vegetarian"],
    alcohol:["Qizil vino","Oq vino","Shampan","Viski / Konyak","Aroq","Ichmayman"],
    child:["Yo‘q","Ha"]
  },
  en: {
    phrase:"Share with us the happiest day of our lives!",
    storyTitle:"Our Story",
    giftsTitle:"Gifts",
    giftsText:"The best gift for us is your presence Please no fresh flowers.",
    dressTitle:"Dress Code",
    dressText:"We would appreciate if you follow this color palette:",
    scheduleTitle:"Schedule",
    schedule1:"7:00 PM — Registration",
    schedule2:"8:30 PM — Banquet",
    mapTitle:"How to find us",
    mapPlace:"Tashkent, Diamond Hall",
    confirmTitle:"Please confirm your attendance",
    foodTitle:"Food preferences",
    alcoholTitle:"Drinks",
    childTitle:"Will you come with a child?",
    musicTitle:"What music would you like to hear?",
    name:"Your name",
    send:"Send",
    status:["I will attend","Unfortunately, I can't"],
    food:["No limits","No meat","No fish","Vegetarian"],
    alcohol:["Red wine","White wine","Champagne","Whisky / Cognac","Vodka","No alcohol"],
    child:["No","Yes"]
  }
};
// === form elements ===
const status = document.getElementById("status");
const food = document.getElementById("food");
const alcohol = document.getElementById("alcohol");
const child = document.getElementById("child");
const name = document.getElementById("name");
const sendBtn = document.getElementById("sendBtn");

function setLang(lang){
  localStorage.setItem("lang",lang);

  document.querySelectorAll(".lang-switch span").forEach(el=>el.classList.remove("active"));
  document.getElementById("lang-"+lang).classList.add("active");

  const t = texts[lang];

  phrase.innerText=t.phrase;
  storyTitle.innerText=t.storyTitle;
  giftsTitle.innerText=t.giftsTitle;
  giftsText.innerText=t.giftsText;
  dressTitle.innerText=t.dressTitle;
  dressText.innerText=t.dressText;
  scheduleTitle.innerText=t.scheduleTitle;
  schedule1.innerText=t.schedule1;
  schedule2.innerText=t.schedule2;
  mapTitle.innerText=t.mapTitle;
  mapPlace.innerText=t.mapPlace;
  confirmTitle.innerText=t.confirmTitle;
  foodTitle.innerText=t.foodTitle;
  alcoholTitle.innerText=t.alcoholTitle;
  childTitle.innerText=t.childTitle;
  musicTitle.innerText=t.musicTitle;
  name.placeholder=t.name;
  sendBtn.innerText=t.send;

  fillSelect(status,t.status);
  fillSelect(food,t.food);
  fillSelect(alcohol,t.alcohol);
  fillSelect(child,t.child);
}

function fillSelect(select,arr){
  select.innerHTML="";
  arr.forEach(v=>{
    const o=document.createElement("option");
    o.text=v;
    select.appendChild(o);
  });
}

setLang(localStorage.getItem("lang") || "ru");
</script>
<script>
let playing = false;
const music = document.getElementById("bgMusic");
const musicBtn = document.getElementById("musicBtn");

function toggleMusic() {
  if (!playing) {
    music.play().then(() => {
      playing = true;
      musicBtn.innerText = "Остановить музыку";
    }).catch(() => {
      alert("Нажмите ещё раз, чтобы включить музыку");
    });
  } else {
    music.pause();
    playing = false;
    musicBtn.innerText = "Включить музыку";
  }
}
</script>

<!-- THANK YOU OVERLAY -->
<div class="thank-overlay" id="thankOverlay">
  <div class="thank-box">
    <div id="thankText"></div>
    <button class="close-btn" id="closeBtn" onclick="closeThank()">Закрыть</button>
  </div>
  <canvas id="confettiCanvas"></canvas>
</div>

<script>
function sendForm() {
  const btn = document.getElementById("sendBtn");
  const guestName = document.getElementById("name").value || "Дорогой гость";

  btn.classList.add('loading');
  btn.disabled = true;
  btn.innerText = "Отправка";

  const payload = {
    name: document.getElementById("name").value,
    status: document.getElementById("status").value,
    food: document.getElementById("food").value,
    alcohol: document.getElementById("alcohol").value,
    child: document.getElementById("child").value,
    music: document.getElementById("music").value
  };

  fetch("https://script.google.com/macros/s/AKfycbziVOcxP9geSdRSwgaQdPh9NgeYV1iV6xZuOD-0Je4wGI7TZoCC7pDT6wabo9olwfow/exec", {
    method: "POST",
    body: JSON.stringify(payload)
  })
  .then(() => {

    // скрываем форму
    const formSection = document.getElementById("sendBtn").closest('.section');
    formSection.style.transition = "0.6s ease";
    formSection.style.opacity = "0";
    formSection.style.transform = "scale(0.95)";

    // показываем окно благодарности
    const overlay = document.getElementById("thankOverlay");
    const thankText = document.getElementById("thankText");

    thankText.innerText = `Спасибо, ${guestName}!\nМы вас ждём!`;
    overlay.classList.add("show");

    // запускаем конфетти
    startConfetti();
// показываем кнопку закрыть с задержкой
const closeBtn = document.getElementById("closeBtn");
closeBtn.style.display = "block";

  })
  .catch(() => {
    btn.classList.remove('loading');
    btn.innerText = "Ошибка! Попробуйте снова";
    btn.disabled = false;
  });
}
</script>
<script>
function startConfetti() {
  const canvas = document.getElementById("confettiCanvas");
  const ctx = canvas.getContext("2d");

  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const confetti = [];
  const colors = ["#7A1F2B", "#E3C3A8", "#FFD700", "#FFFFFF", "#FF6F91"];

  for (let i = 0; i < 120; i++) {
    confetti.push({
      x: Math.random() < 0.5 ? 0 : canvas.width,
      y: Math.random() * canvas.height,
      r: Math.random() * 6 + 4,
      color: colors[Math.floor(Math.random() * colors.length)],
      speed: Math.random() * 4 + 2,
      dir: Math.random() < 0.5 ? 1 : -1
    });
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    confetti.forEach(c => {
      ctx.beginPath();
      ctx.fillStyle = c.color;
      ctx.arc(c.x, c.y, c.r, 0, Math.PI * 2);
      ctx.fill();
    });

    update();
    requestAnimationFrame(draw);
  }

  function update() {
    confetti.forEach(c => {
      c.x += c.speed * c.dir;
      c.y += 3;

      if (c.y > canvas.height) {
        c.y = -10;
        c.x = Math.random() * canvas.width;
      }
    });
  }

  draw();
}
</script>
<script>
function closeThank() {
  const overlay = document.getElementById("thankOverlay");

  overlay.classList.remove("show");

  // очищаем конфетти
  const canvas = document.getElementById("confettiCanvas");
  const ctx = canvas.getContext("2d");
  ctx.clearRect(0, 0, canvas.width, canvas.height);
}
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {

  const sections = document.querySelectorAll(".section");

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {

        // маленькая задержка, чтобы браузер успел применить opacity:0
        setTimeout(() => {
          entry.target.classList.add("visible");
        }, 100);

        observer.unobserve(entry.target);
      }
    });
  }, {
    threshold: 0.2
  });

  sections.forEach(section => {
    observer.observe(section);
  });

});
</script>

<script>
let musicStarted = false;
const music = document.getElementById("bgMusic");
const musicBtn = document.getElementById("musicBtn");

function tryStartMusic() {
  if (musicStarted) return;

  music.volume = 0;
  music.play().then(() => {
    musicStarted = true;
    fadeInMusic();
    musicBtn.innerText = "Остановить музыку";

  }).catch(() => {
    // если браузер заблокировал — ничего не делаем
  });
}


// плавное увеличение громкости
function fadeInMusic() {
  let volume = 0;
  const fade = setInterval(() => {
    if (volume < 1) {
      volume += 0.02;   // скорость нарастания
      music.volume = volume;
    } else {
      clearInterval(fade);
    }
  }, 100);
}
</script>
<script>
let musicStarted = false;
const music = document.getElementById("bgMusic");
const musicBtn = document.getElementById("musicBtn");

function startMusicOnce() {
  if (musicStarted) return;

  music.volume = 0;
  music.play().then(() => {
    musicStarted = true;
    fadeInMusic();
    musicBtn.innerText = "Остановить музыку";

    // после запуска убираем обработчики
    document.removeEventListener("touchstart", startMusicOnce);
    document.removeEventListener("click", startMusicOnce);
  }).catch(() => {
    // если браузер вдруг отказал — ничего не делаем
  });
}

// ЛЮБОЕ ПЕРВОЕ КАСАНИЕ ИЛИ КЛИК
document.addEventListener("touchstart", startMusicOnce, { once: true });
document.addEventListener("click", startMusicOnce, { once: true });

// плавное появление громкости
function fadeInMusic() {
  let volume = 0;
  const fade = setInterval(() => {
    if (volume < 1) {
      volume += 0.02;
      music.volume = volume;
    } else {
      clearInterval(fade);
    }
  }, 100);
}
</script>

</body>
</html>
